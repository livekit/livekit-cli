package agentfs

import (
	"os"
	"path/filepath"
	"testing"
)

func TestValidateUVProject(t *testing.T) {
	tempDir := t.TempDir()

	// Test UV project without uv.lock - should show warning
	os.WriteFile(filepath.Join(tempDir, "pyproject.toml"), []byte(`[project]
name = "test"
[dependency-groups]
dev = ["pytest"]
`), 0644)

	// Since validateUVProject writes to stdout, we just call the function
	// and verify it doesn't crash
	validateUVProject(tempDir)

	// Test UV project with uv.lock - should not show warning
	uvLockDir := t.TempDir()
	os.WriteFile(filepath.Join(uvLockDir, "pyproject.toml"), []byte(`[project]
name = "test"
[dependency-groups]
dev = ["pytest"]
`), 0644)
	os.WriteFile(filepath.Join(uvLockDir, "uv.lock"), []byte(`# This file is @generated by uv.
version = 1
requires-python = ">=3.9"
`), 0644)

	// This should not show warning (function should return silently)
	validateUVProject(uvLockDir)

	t.Logf("âœ“ UV project validation working correctly")
}
